# Unstructured.io & ETLï¼šæ„å»º AI æ—¶ä»£çš„æ•°æ®æµæ°´çº¿

> 2025 å¹´ 12 æœˆ
> ç‰ˆæœ¬ï¼šUnstructured.io v0.18.x

æœ¬æ–‡æ¡£æ—¨åœ¨ä»‹ç» AI æ•°æ®å¤„ç†é¢†åŸŸçš„å…³é”®æ¦‚å¿µ **ETL**ï¼Œä»¥åŠåœ¨éç»“æ„åŒ–æ•°æ®å¤„ç†æ–¹é¢è¡¨ç°å“è¶Šçš„å·¥å…· **Unstructured.io**ï¼Œå¸®åŠ©å¼€å‘è€…ç†è§£å¦‚ä½•ä¸º LLM åº”ç”¨ï¼ˆå¦‚ RAGï¼‰å‡†å¤‡é«˜è´¨é‡çš„æ•°æ®ã€‚

```mermaid
graph LR
    Docs["éç»“æ„åŒ–æ–‡æ¡£<br/>(PDF/Word/å›¾ç‰‡ç­‰ 64+ æ ¼å¼)"] -->|Extract| ETL["Unstructured.io<br/>(è§£æä¸åˆ†åŒº)"]
    ETL -->|VLM å¢å¼º| VLM["å›¾åƒæè¿°/è¡¨æ ¼è½¬æ¢<br/>/OCR ä¼˜åŒ–"]
    VLM -->|Transform| Chunks["è¯­ä¹‰åˆ‡ç‰‡<br/>(Chunking)"]
    Chunks -->|Load| VDB[("å‘é‡æ•°æ®åº“")]
    VDB <-->|Retrieval| App["LLM åº”ç”¨<br/>(RAG)"]
```

## 1. ETLï¼šæ•°æ®å¤„ç†çš„åŸºçŸ³

ETL æ˜¯æ•°æ®ä»“åº“å’Œå¤§æ•°æ®é¢†åŸŸæœ€ç»å…¸çš„æ¦‚å¿µï¼Œä»£è¡¨äº†æ•°æ®ä»æºå¤´åˆ°ç›®æ ‡çš„ä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼š**Extractï¼ˆæŠ½å–ï¼‰ã€Transformï¼ˆè½¬æ¢ï¼‰ã€Loadï¼ˆåŠ è½½ï¼‰**ã€‚åœ¨ AI æ—¶ä»£ï¼ŒETL çš„å†…æ¶µå‘ç”Ÿäº†æ¼”å˜ï¼Œè¢«ç§°ä¸º **ETL for LLMs**ã€‚

### æ ¸å¿ƒæµç¨‹

1.  **Extract (æŠ½å–)**ï¼š
    - ä»å„ç§æ•°æ®æºï¼ˆæ•°æ®åº“ã€APIã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘é¡µï¼‰è·å–åŸå§‹æ•°æ®ã€‚
    - _AI åœºæ™¯æŒ‘æˆ˜_ï¼šæ•°æ®æºä¸å†å±€é™äºç»“æ„åŒ–è¡¨æ ¼ï¼Œæ›´å¤šæ˜¯ PDFã€Wordã€PPTã€å›¾ç‰‡ã€HTML ç­‰éç»“æ„åŒ–æ•°æ®ã€‚
2.  **Transform (è½¬æ¢)**ï¼š
    - å¯¹æ•°æ®è¿›è¡Œæ¸…æ´—ã€æ ¼å¼åŒ–ã€å»é‡ã€è„±æ•ã€‚
    - _AI åœºæ™¯æŒ‘æˆ˜_ï¼šéœ€è¦è¿›è¡Œ**æ–‡æ¡£åˆ‡åˆ† (Chunking)**ã€**å‘é‡åŒ– (Embedding)**ã€å…ƒæ•°æ®æå–ç­‰æ“ä½œï¼Œä»¥ä¾¿ LLM ç†è§£ã€‚
3.  **Load (åŠ è½½)**ï¼š
    - å°†å¤„ç†å¥½çš„æ•°æ®å†™å…¥ç›®æ ‡å­˜å‚¨ã€‚
    - _AI åœºæ™¯æŒ‘æˆ˜_ï¼šç›®æ ‡é€šå¸¸æ˜¯**å‘é‡æ•°æ®åº“** (Milvus, Pinecone) æˆ–å›¾æ•°æ®åº“ï¼Œè€Œéä¼ ç»Ÿçš„æ•°æ®ä»“åº“ã€‚

### å…³é”®è½¬æ¢æ­¥éª¤ï¼šChunking (åˆ‡åˆ†)

åœ¨ Transform é˜¶æ®µï¼Œ**Chunking** æ˜¯æœ€å…³é”®çš„ä¸€ç¯ã€‚ç›´æ¥å°†é•¿æ–‡æ¡£å–‚ç»™ LLM ä¼šå¯¼è‡´ä¸Šä¸‹æ–‡çª—å£æº¢å‡ºæˆ–æ£€ç´¢ç²¾åº¦ä¸‹é™ã€‚

- **Fixed-size Chunking (å›ºå®šå¤§å°)**ï¼šç®€å•ç²—æš´ï¼ŒæŒ‰å­—ç¬¦æ•°æˆ– Token æ•°åˆ‡åˆ†ï¼ˆå¦‚æ¯ 500 å­—ç¬¦åˆ‡ä¸€æ®µï¼‰ã€‚ç¼ºç‚¹æ˜¯å®¹æ˜“åˆ‡æ–­è¯­ä¹‰ã€‚
- **Semantic Chunking (è¯­ä¹‰åˆ‡åˆ†)**ï¼šåŸºäºæ–‡æ¡£ç»“æ„ï¼ˆæ®µè½ã€æ ‡é¢˜ï¼‰æˆ–è¯­ä¹‰ç›¸ä¼¼åº¦è¿›è¡Œåˆ‡åˆ†ã€‚Unstructured.io çš„ä¼˜åŠ¿åœ¨äºå®ƒèƒ½è¯†åˆ«æ–‡æ¡£å…ƒç´ ï¼Œå¤©ç„¶æ”¯æŒåŸºäº Title/Table/Paragraph çš„è¯­ä¹‰åˆ‡åˆ†ï¼Œæ•ˆæœè¿œä¼˜äºå›ºå®šå¤§å°åˆ‡åˆ†ã€‚

---

## 2. Unstructured.ioï¼šéç»“æ„åŒ–æ•°æ®çš„ ETL åˆ©å™¨

Unstructured.io æ˜¯ä¸€ä¸ªå¼€æºåº“ï¼ˆä¹Ÿæœ‰ SaaS æœåŠ¡ï¼‰ï¼Œä¸“é—¨è‡´åŠ›äºè§£å†³ LLM åº”ç”¨ä¸­æœ€å¤´ç–¼çš„é—®é¢˜ï¼š**å¦‚ä½•ä»ä»»æ„æ ¼å¼çš„éç»“æ„åŒ–æ–‡æ¡£ä¸­æå–å‡ºå¹²å‡€ã€å¯ç”¨çš„æ–‡æœ¬æ•°æ®**ã€‚å®ƒæ˜¯æ„å»º RAG (æ£€ç´¢å¢å¼ºç”Ÿæˆ) ç³»ç»Ÿçš„é‡è¦åŸºç¡€è®¾æ–½ã€‚

### æ ¸å¿ƒç‰¹æ€§

- **å…¨æ ¼å¼æ”¯æŒ (Ingest Any Data)**ï¼š
  - æ”¯æŒè§£æ PDF, HTML, Word (.docx), PowerPoint (.pptx), Excel (.xlsx), Email (.eml/.msg), Markdown, Images, EPUB, RTF, XML ç­‰ **64+ ç§æ–‡ä»¶æ ¼å¼**ã€‚
  - å³ä½¿æ˜¯æ‰«æç‰ˆçš„ PDF æˆ–å›¾ç‰‡ï¼Œä¹Ÿèƒ½é€šè¿‡é›†æˆçš„ OCR (Tesseract/PaddleOCR) æå–æ–‡æœ¬ã€‚
- **æ™ºèƒ½åˆ†åŒº (Partitioning)**ï¼š
  - ä¸ä»…ä»…æ˜¯æå–çº¯æ–‡æœ¬ï¼Œè¿˜èƒ½è¯†åˆ«æ–‡æ¡£ç»“æ„ã€‚å®ƒèƒ½å°†æ–‡æ¡£åˆ‡åˆ†ä¸º Title (æ ‡é¢˜), NarrativeText (æ­£æ–‡), Table (è¡¨æ ¼), ListItem (åˆ—è¡¨é¡¹) ç­‰è¯­ä¹‰å—ã€‚
  - è¿™å¯¹äº RAG è‡³å…³é‡è¦ï¼Œå› ä¸ºä¿ç•™æ–‡æ¡£ç»“æ„èƒ½æ˜¾è‘—æå‡æ£€ç´¢çš„å‡†ç¡®æ€§ã€‚
- **VLM å¢å¼ºåŠŸèƒ½ (Enrichments)**ï¼š
  - **Image Description**ï¼šä½¿ç”¨è§†è§‰è¯­è¨€æ¨¡å‹ (VLM) ä¸ºæ£€æµ‹åˆ°çš„å›¾åƒç”Ÿæˆæ–‡æœ¬æ‘˜è¦ã€‚
  - **Generative OCR**ï¼šä½¿ç”¨ VLM æå‡æ–‡æœ¬å—çš„ OCR è¯†åˆ«å‡†ç¡®åº¦ã€‚
  - **Table to HTML**ï¼šä½¿ç”¨ VLM å°†æ£€æµ‹åˆ°çš„è¡¨æ ¼è½¬æ¢ä¸º HTML ç»“æ„åŒ–è¡¨ç¤ºã€‚
- **æ¸…æ´—ä¸ä¼˜åŒ– (Cleaning)**ï¼š
  - å†…ç½®å¤šç§æ¸…æ´—å‡½æ•°ï¼Œå¦‚å»é™¤å¤šä½™çš„ç©ºç™½ã€å»é™¤ä¹±ç ã€æ ‡å‡†åŒ–æ—¥æœŸæ ¼å¼ã€å»é™¤é¡µçœ‰é¡µè„šç­‰å™ªéŸ³æ•°æ®ã€‚
- **è¿æ¥å™¨ç”Ÿæ€ (Connectors)**ï¼š
  - æä¾› **30+ è¿æ¥å™¨å’Œ 1,250+ ç®¡é“**ï¼ŒåŒ…æ‹¬ Source Connectors (S3, Google Drive, SharePoint, Dropbox, Slack) å’Œ Destination Connectors (Pinecone, Weaviate, MongoDB, Databricks, Snowflake, Elastic)ï¼Œè½»æ¾æ„å»º ETL ç®¡é“ã€‚

### éƒ¨ç½²æ–¹å¼ï¼šLocal vs Platform

- **Open Source Library (Local)**ï¼šå®Œå…¨å…è´¹ï¼Œæ•°æ®ä¸å‡ºæœ¬åœ°ã€‚ä½†éœ€è¦è‡ªè¡Œå®‰è£…å¤æ‚çš„ä¾èµ–ï¼ˆå¦‚ `tesseract-ocr`, `poppler-utils`, `libreoffice`ï¼‰ï¼Œä¸”å¤„ç† PDF/Image æå…¶æ¶ˆè€— CPU/GPU èµ„æºã€‚**æ³¨æ„ï¼šå½“å‰ç‰ˆæœ¬å·²ä¸å†æ”¯æŒ Python 3.9ï¼Œå»ºè®®ä½¿ç”¨ Python 3.10+**ã€‚
- **Unstructured Platform**ï¼šå®˜æ–¹æä¾›çš„æ‰˜ç®¡æœåŠ¡ï¼ŒåŒ…å« **UI ç•Œé¢**å’Œ **API** ä¸¤ç§ä½¿ç”¨æ–¹å¼ã€‚
  - **UI ç•Œé¢**ï¼šæ— éœ€ç¼–ç ï¼Œé€šè¿‡æ‹–æ”¾æ–‡ä»¶å³å¯å¿«é€Ÿå¤„ç†ï¼Œæ”¯æŒå®æ—¶é¢„è§ˆåˆ†åŒºç»“æœå’Œ VLM å¢å¼ºã€‚
  - **API**ï¼šé€šè¿‡ HTTP è¯·æ±‚å¤„ç†æ–‡ä»¶ï¼Œé€Ÿåº¦æ›´å¿«ä¸”æ”¯æŒè‡ªåŠ¨æ‰©ç¼©å®¹ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒå¿«é€Ÿé›†æˆã€‚
  - **å®šä»·æ–¹æ¡ˆ**ï¼šæä¾› Let's Goï¼ˆå…è´¹è¯•ç”¨ï¼‰ã€Pay-As-You-Goï¼ˆæŒ‰éœ€ä»˜è´¹ï¼‰ã€Businessï¼ˆä¼ä¸šçº§ï¼‰ç­‰å¤šç§æ–¹æ¡ˆã€‚

### é€‚ç”¨åœºæ™¯

- **RAG çŸ¥è¯†åº“æ„å»º**ï¼šå°†ä¼ä¸šå†…éƒ¨å †ç§¯å¦‚å±±çš„ PDF æŠ¥å‘Šã€åˆåŒã€æŠ€æœ¯æ‰‹å†Œè½¬åŒ–ä¸ºå‘é‡æ•°æ®åº“å¯ç´¢å¼•çš„æ ¼å¼ã€‚
- **è¡¨æ ¼æ•°æ®æå–**ï¼šä» PDF è´¢æŠ¥ä¸­æå–è¡¨æ ¼æ•°æ®ï¼Œå¹¶ä¿æŒå…¶ç»“æ„ï¼Œä¾› LLM è¿›è¡Œæ•°æ®åˆ†æã€‚
- **å¤šæ¨¡æ€æ•°æ®é¢„å¤„ç†**ï¼šå¤„ç†åŒ…å«å›¾æ–‡æ··æ’çš„å¤æ‚æ–‡æ¡£ã€‚

---

## 3. å®æˆ˜ï¼šæ„å»ºä¸€ä¸ªç®€å•çš„ PDF å¤„ç†æµæ°´çº¿

ç»“åˆ ETL æ¦‚å¿µä¸ Unstructured.ioï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªå…¸å‹çš„ AI æ•°æ®å¤„ç†æµç¨‹ï¼š

### æµç¨‹å›¾

```mermaid
graph LR
    A[åŸå§‹ PDF æ–‡ä»¶] -->|Extract| B("Unstructured.io<br/>(hi_res + OCR)")
    B -->|Partition| C{è¯†åˆ«å…ƒç´ }
    C -->|Title| D1[æ ‡é¢˜]
    C -->|NarrativeText| D2[æ­£æ–‡æ®µè½]
    C -->|Table| D3["è¡¨æ ¼<br/>(HTML ç»“æ„)"]
    C -->|ListItem| D4[åˆ—è¡¨é¡¹]
    D1 & D2 & D3 & D4 -->|VLM å¢å¼º| E[å›¾åƒæè¿°/è¡¨æ ¼è½¬æ¢]
    E -->|Transform| F[Chunking & Embedding]
    F -->|Load| G[å‘é‡æ•°æ®åº“]
```

### ä»£ç ç¤ºä¾‹ (Python)

**å‰ç½®å‡†å¤‡**ï¼š
é™¤äº†å®‰è£… Python åº“ `pip install "unstructured[all-docs]"` å¤–ï¼Œå¤„ç† PDF è¿˜éœ€è¦å®‰è£…ç³»ç»Ÿçº§ä¾èµ–ï¼š

- **Poppler (poppler-utils)**ï¼šç”¨äº PDF æ¸²æŸ“ã€‚
- **Tesseract (tesseract-ocr)**ï¼šç”¨äº OCR æ–‡å­—è¯†åˆ«ï¼ˆå¯å®‰è£… `tesseract-lang` è·å–æ›´å¤šè¯­è¨€æ”¯æŒï¼‰ã€‚
- **LibreOffice**ï¼šç”¨äºå¤„ç† MS Office æ–‡æ¡£ã€‚
- **Pandoc (2.14.2+)**ï¼šç”¨äºå¤„ç† EPUBã€RTF å’Œ Open Office æ–‡æ¡£ã€‚

> ğŸ’¡ **æç¤º**ï¼šä¹Ÿå¯ä»¥ä½¿ç”¨ Docker é•œåƒå¿«é€Ÿå¼€å§‹ï¼š
>
> ```bash
> docker pull downloads.unstructured.io/unstructured-io/unstructured:latest
> ```

ä½¿ç”¨ `unstructured` åº“å¤„ç† PDF çš„ç®€å•ç¤ºä¾‹ï¼š

```python
from unstructured.partition.auto import partition
from unstructured.partition.pdf import partition_pdf

# æ–¹å¼ä¸€ï¼šä½¿ç”¨é€šç”¨ partition å‡½æ•°ï¼ˆè‡ªåŠ¨æ£€æµ‹æ–‡ä»¶ç±»å‹ï¼‰
elements = partition(filename="annual_report.pdf")

# æ–¹å¼äºŒï¼šä½¿ç”¨ PDF ä¸“ç”¨å‡½æ•°ï¼ˆæ›´ç²¾ç»†æ§åˆ¶ï¼‰
# ä½¿ç”¨ "hi_res" ç­–ç•¥ï¼Œåˆ©ç”¨ OCR å’Œè§†è§‰æ¨¡å‹è¯†åˆ«æ–‡æ¡£å¸ƒå±€
elements = partition_pdf(
    filename="annual_report.pdf",
    strategy="hi_res",
    infer_table_structure=True
)

# 2. å¤„ç†æå–å‡ºçš„å…ƒç´ 
for element in elements:
    if element.category == "Table":
        print(f"[è¡¨æ ¼å†…å®¹]: {element.metadata.text_as_html}") # ä¿ç•™è¡¨æ ¼çš„ HTML ç»“æ„
    elif element.category == "Title":
        print(f"[æ ‡é¢˜]: {element.text}")
    else:
        print(f"[æ­£æ–‡]: {element.text}")

# 3. Load (ä¼ªä»£ç )
# vector_db.upsert(embeddings(elements))
```

---

## æ€»ç»“

- **ETL** æ˜¯æ–¹æ³•è®ºï¼Œå®šä¹‰äº†æ•°æ®æµåŠ¨çš„æ ‡å‡†è¿‡ç¨‹ã€‚åœ¨ AI æ—¶ä»£ï¼Œå®ƒä»â€œè¡¨åˆ°è¡¨â€å˜æˆäº†â€œæ–‡æ¡£åˆ°å‘é‡â€ã€‚
- **Unstructured.io** æ˜¯å®ç°è¿™ä¸€æ–¹æ³•è®ºçš„æœ€ä½³å·¥å…·ä¹‹ä¸€ï¼Œå®ƒå¡«å¹³äº†â€œäººç±»å¯è¯»æ–‡æ¡£â€ä¸â€œæœºå™¨å¯è¯»æ•°æ®â€ä¹‹é—´çš„é¸¿æ²Ÿã€‚
- **æœ€æ–°ç‰ˆæœ¬ (0.18.x)** å·²æ”¯æŒ 64+ ç§æ–‡ä»¶æ ¼å¼ã€VLM å¢å¼ºåŠŸèƒ½ã€30+ è¿æ¥å™¨ï¼Œå¹¶æä¾› UI å’Œ API ä¸¤ç§ä½¿ç”¨æ–¹å¼ã€‚

æŒæ¡ Unstructured.ioï¼Œå°±æŒæ¡äº†é«˜è´¨é‡ RAG åº”ç”¨çš„æ•°æ®å…¥å£ã€‚

---

## å‚è€ƒèµ„æº

- [Unstructured å®˜æ–¹æ–‡æ¡£](https://docs.unstructured.io/)
- [Unstructured GitHub ä»“åº“](https://github.com/Unstructured-IO/unstructured)
- [Unstructured Platform](https://platform.unstructured.io/)
- [Unstructured å®˜æ–¹åšå®¢](https://unstructured.io/blog)
